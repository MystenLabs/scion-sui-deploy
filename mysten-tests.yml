---
# The bare-metal hosts that will be running both the Sui validator and hosting the EDGE VM.
bare_metal_hosts:
  hosts:
    ash-baremetal-01:
    tsw-baremetal-01:
    nyc-baremetal-01:
    chi-baremetal-01:
    lon-baremetal-01:
    lon-baremetal-02:

# The inventory hostname used to refer to the edge.
edge_vms:
  hosts:
    ash-edge-01:
    tsw-edge-01:
    nyc-edge-01:
    chi-edge-01:
    lon-edge-01:
    lon-edge-02:
    edge: # temp for testing against the ash server

all: 
  vars:
    # SSH authorized keys that are added to the EDGE VM. Requires at least 1.
    ssh_authorized_keys:
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINd+Ss33L4TDDiLseBVw7t+Ofy3FyaeLyCHWGzXgbV1p pe@mystenlabs.com"
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIK/ALpkZY66QR/uYrn4g9/GAjOM5cJ2lKbZrzzMhAg7X jean-pierre@mystenlabs.com"
      - "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILAVYnKYofNULBzpMk8jnxLExvJZXWcs8lQGlIzAJFin chris.gorham@mystenlabs.com"
    ssh_edge_authorized_keys:
      - "AAAAC3NzaC1lZDI1NTE5AAAAINd+Ss33L4TDDiLseBVw7t+Ofy3FyaeLyCHWGzXgbV1p"
      - "AAAAC3NzaC1lZDI1NTE5AAAAIK/ALpkZY66QR/uYrn4g9/GAjOM5cJ2lKbZrzzMhAg7X"
      - "AAAAC3NzaC1lZDI1NTE5AAAAILAVYnKYofNULBzpMk8jnxLExvJZXWcs8lQGlIzAJFin"

ashLatitude:
  hosts:
    ash-baremetal-01:
      # -- SSH options
      ansible_host: "103.106.59.195"
      ansible_user: "ubuntu"
      ansible_ssh_private_key_file: ~/.ssh/mysten_gmail_personal

      # -- Configuration
      # Public interface that will be shared with the EDGE VM
      public_interface: "scionwan"
      # Public IPv4 address of the bare-metal host
      public_ipv4: "103.106.59.195"
      public_ipv4_gateway: "103.106.59.194"
      # The inventory hostname of the hosted EDGE
      hosted_edge: ash-edge-01

    ash-edge-01:
      # -- SSH options
      # Uses the bare-metal as a jump host to SSH into the hosted EDGE VM, does not need to be changed.
      ansible_host: "192.168.18.2"
      ansible_user: "anapaya"
      ansible_ssh_common_args: "-J {{ hostvars[vm_host]['ansible_user'] ~ '@' ~ hostvars[vm_host]['ansible_host'] }}"

      # -- Configuration
      # Inventory hostname of the bare-metal host associated with this EDGE VM
      vm_host: ash-baremetal-01
      # IP and gateway for the EDGE appliance.
      network_config:
        ipv4_cidr: "2605:6440:d000:4b::3/64"
        gateway: "2605:6440:d000:4b::1"

      # Public IPv4 address to be configured on the EDGE.
      # Defaults to the network address above without the CIDR range.
      public_ipv4: "{{ network_config.ipv4_cidr | ansible.utils.ipaddr('address') }}"

  vars:
    metrics_labels:
      appliance: "mystenlabs-ash-01.appliance"
      product: "edge"
      project: "sui-scion-testnet"
      shortname: "mystenlabs-ash-01-edge"
    dns:
      - address: "2620:fe::fe"
      - address: "2620:fe::9"
    ebgp_multihop: 2
    appliance_hostname: "mystenlabs-ash-01-edge"
    logging_url: "https://incoming_logs:c1ace353e91a01f60e76f9cc@gateway-2.loki.sui.io/loki/api/v1/push"
    # Directory in which secret values are stored on the controller
    secrets_dir: "~/scion-deployment-packages/mystenlabs-ash-01"
    # Directory of the deployment package provided by Mysten Labs
    deployment_package_path: "~/scion-deployment-packages/mystenlabs-ash-01"

    # Paths derived from the above
    deployment_package_config: "{{ deployment_package_path }}/config.yml"
    scion_trcs_path: "{{ deployment_package_path }}/trcs"
    scion_certificate_path: "{{ deployment_package_path }}/scion-cert.pem"
    scion_forwarding_key_path: "{{ secrets_dir }}/forwarding-key.key"
    scion_private_key_path: "{{ secrets_dir }}/scion-private-key.key"
      #    grafana_agent_systemd_path: "{{ deployment_package_path }}/grafana-agent-systemd.yml"
      #grafana_agent_config_path: "{{ deployment_package_path }}/grafana-agent-config.yml"

chiLatitude:
  hosts:
    chi-baremetal-01:
      # -- SSH options
      ansible_host: "91.242.214.70"
      ansible_user: "ubuntu"
      ansible_ssh_private_key_file: ~/.ssh/mysten_gmail_personal

      # -- Configuration
      # Public interface that will be shared with the EDGE VM
      public_interface: "scionwan"
      # Public IPv4 address of the bare-metal host
      public_ipv4: "91.242.214.70"
      # The inventory hostname of the hosted EDGE
      hosted_edge: chi-edge-01

    chi-edge-01:
      # -- SSH options
      # Uses the bare-metal as a jump host to SSH into the hosted EDGE VM, does not need to be changed.
      ansible_host: "192.168.18.2"
      ansible_user: "anapaya"
      ansible_ssh_common_args: "-J {{ hostvars[vm_host]['ansible_user'] ~ '@' ~ hostvars[vm_host]['ansible_host'] }}"

      # -- Configuration
      # Inventory hostname of the bare-metal host associated with this EDGE VM
      vm_host: chi-baremetal-01
      # IP and gateway for the EDGE appliance.
      network_config:
        ipv4_cidr: "91.242.214.101/24"
        gateway: "91.242.214.1"

      # Public IPv4 address to be configured on the EDGE.
      # Defaults to the network address above without the CIDR range.
      public_ipv4: "{{ network_config.ipv4_cidr | ansible.utils.ipaddr('address') }}"

  vars:
    metrics_labels:
      appliance: "mystenlabs-chi-01.appliance"
      product: "edge"
      project: "sui-scion-testnet"
      shortname: "mystenlabs-chi-01-edge"
    dns:
      - address: "9.9.9.9"
      - address: "149.112.112.112"
    ebgp_multihop: 2
    appliance_hostname: "mystenlabs-chi-01-edge"
    logging_url: "https://incoming_logs:c1ace353e91a01f60e76f9cc@gateway-2.loki.sui.io/loki/api/v1/push"
    # Directory in which secret values are stored on the controller
    secrets_dir: "~/scion-deployment-packages/mystenlabs-chi-01"
    # Directory of the deployment package provided by Mysten Labs
    deployment_package_path: "~/scion-deployment-packages/mystenlabs-chi-01"

    # Paths derived from the above
    deployment_package_config: "{{ deployment_package_path }}/config.yml"
    scion_trcs_path: "{{ deployment_package_path }}/trcs"
    scion_certificate_path: "{{ deployment_package_path }}/scion-cert.pem"
    scion_forwarding_key_path: "{{ secrets_dir }}/forwarding-key.key"
    scion_private_key_path: "{{ secrets_dir }}/scion-private-key.key"
    #grafana_agent_systemd_path: "{{ deployment_package_path }}/grafana-agent-systemd.yml"
    #grafana_agent_config_path: "{{ deployment_package_path }}/grafana-agent-config.yml"

terraswitch:
  hosts:
    tsw-baremetal-01:
      # -- SSH options
      ansible_host: "2607:fdc0:1:e:0:1:0:1"
      ansible_user: "ubuntu"
      ansible_ssh_private_key_file: ~/.ssh/mysten_gmail_personal

      # -- Configuration
      # Public interface that will be shared with the EDGE VM
      public_interface: "scionwan"
      # Public IPv4 address of the bare-metal host
      public_ipv4: "2607:fdc0:1:e:0:1:0:1"
      # The inventory hostname of the hosted EDGE
      hosted_edge: tsw-edge-01

    tsw-edge-01:
      # -- SSH options
      # Uses the bare-metal as a jump host to SSH into the hosted EDGE VM, does not need to be changed.
      ansible_host: "192.168.18.2"
      ansible_user: "anapaya"
      ansible_ssh_common_args: "-J {{ hostvars[vm_host]['ansible_user'] ~ '@' ~ hostvars[vm_host]['ansible_host'] }}"

      # -- Configuration
      # Inventory hostname of the bare-metal host associated with this EDGE VM
      vm_host: tsw-baremetal-01
      # IP and gateway for the EDGE appliance.
      network_config:
        ipv4_cidr: "64.130.56.11/28"
        gateway: "64.130.56.1"
        if_name: "enp6s0"
      # Public IPv4 address to be configured on the EDGE.
      # Defaults to the network address above without the CIDR range.
      public_ipv4: "{{ network_config.ipv4_cidr | ansible.utils.ipaddr('address') }}"

  vars:
    metrics_labels:
      appliance: "scionsui-tsw-pit-01.appliance"
      product: "edge"
      project: "sui-scion-testnet"
      shortname: "scionsui-tsw-pit-01-edge"
    dns:
      - address: "2620:fe::fe"
      - address: "2620:fe::9"
    ebgp_multihop: 2
    appliance_hostname: "scionsui-tsw-pit-01-edge"
    logging_url: "https://incoming_logs:c1ace353e91a01f60e76f9cc@gateway-2.loki.sui.io/loki/api/v1/push"
    # Directory in which secret values are stored on the controller
    secrets_dir: "~/scion-deployment-packages/scionsui-tsw-pit-01/secrets"
    # Directory of the deployment package provided by Mysten Labs
    deployment_package_path: "~/scion-deployment-packages/scionsui-tsw-pit-01"

    # Paths derived from the above
    deployment_package_config: "{{ deployment_package_path }}/config.yaml"
    scion_trcs_path: "{{ deployment_package_path }}/trcs"
    scion_certificate_path: "{{ deployment_package_path }}/scion-cert.pem"
    scion_forwarding_key_path: "{{ secrets_dir }}/forwarding-key.key"
    scion_private_key_path: "{{ secrets_dir }}/scion-private-key.key"
      #    grafana_agent_systemd_path: "{{ deployment_package_path }}/grafana-agent-systemd.yml"
      #grafana_agent_config_path: "{{ deployment_package_path }}/grafana-agent-config.yml"
      
nycLatitude:
  hosts:
    nyc-baremetal-01:
      # -- SSH options
      ansible_host: "160.202.128.153"
      ansible_user: "ubuntu"
      ansible_ssh_private_key_file: ~/.ssh/mysten_gmail_personal

      # -- Configuration
      # Public interface that will be shared with the EDGE VM
      public_interface: "scionwan"
      # Public IPv4 address of the bare-metal host
      public_ipv4: "160.202.128.153"
      # The inventory hostname of the hosted EDGE
      hosted_edge: nyc-edge-01

    edge:
      # -- SSH options
      # Uses the bare-metal as a jump host to SSH into the hosted EDGE VM, does not need to be changed.
      ansible_host: "192.168.18.2"
      ansible_user: "anapaya"
      ansible_ssh_common_args: "-J {{ hostvars[vm_host]['ansible_user'] ~ '@' ~ hostvars[vm_host]['ansible_host'] }}"

      # -- Configuration
      # Inventory hostname of the bare-metal host associated with this EDGE VM
      vm_host: nyc-baremetal-01
      # IP and gateway for the EDGE appliance.
      network_config:
        ipv4_cidr: "45.250.253.165/31"
        gateway: "45.250.253.164"
        if_name: "enp6s0"
      # Public IPv4 address to be configured on the EDGE.
      # Defaults to the network address above without the CIDR range.
      public_ipv4: "{{ network_config.ipv4_cidr | ansible.utils.ipaddr('address') }}"

  vars:
    metrics_labels:
      appliance: "scionsui-lat-nyc-edge1.appliance"
      product: "edge"
      project: "sui-scion-testnet"
      shortname: "scionsui-lat-nyc-edge1"
    dns:
      - address: "9.9.9.9"
      - address: "149.112.112.112"
    ebgp_multihop: 2
    appliance_hostname: "scionsui-lat-nyc-edge1"
    logging_url: "https://incoming_logs:c1ace353e91a01f60e76f9cc@gateway-2.loki.sui.io/loki/api/v1/push"
    # Directory in which secret values are stored on the controller
    secrets_dir: "~/scion-deployment-packages/scionsui-67-edge01/secrets"
    # Directory of the deployment package provided by Mysten Labs
    deployment_package_path: "~/scion-deployment-packages/scionsui-67-edge01"

    # Paths derived from the above
    deployment_package_config: "{{ deployment_package_path }}/config.yml"
    scion_trcs_path: "{{ deployment_package_path }}/trcs"
    scion_certificate_path: "{{ deployment_package_path }}/scion-cert.pem"
    scion_forwarding_key_path: "{{ secrets_dir }}/forwarding-key.key"
    scion_private_key_path: "{{ secrets_dir }}/scion-private-key.key"
      #    grafana_agent_systemd_path: "{{ deployment_package_path }}/grafana-agent-systemd.yml"
      #grafana_agent_config_path: "{{ deployment_package_path }}/grafana-agent-config.yml"

lonLatitude1:
  hosts:
    lon-baremetal-01:
      # -- SSH options
      ansible_host: "103.219.168.135"
      ansible_user: "ubuntu"
      ansible_ssh_private_key_file: ~/.ssh/mysten_gmail_personal

      # -- Configuration
      # Public interface that will be shared with the EDGE VM
      public_interface: "scionwan"
      # Public IPv4 address of the bare-metal host
      public_ipv4: "103.219.168.135"
      # The inventory hostname of the hosted EDGE
      hosted_edge: lon-edge-01

    lon-edge-01:
      # -- SSH options
      # Uses the bare-metal as a jump host to SSH into the hosted EDGE VM, does not need to be changed.
      ansible_host: "192.168.18.2"
      ansible_user: "anapaya"
      ansible_ssh_common_args: "-J {{ hostvars[vm_host]['ansible_user'] ~ '@' ~ hostvars[vm_host]['ansible_host'] }}"

      # -- Configuration
      # Inventory hostname of the bare-metal host associated with this EDGE VM
      vm_host: lon-baremetal-01
      # IP and gateway for the EDGE appliance.
      network_config:
        ipv4_cidr: "103.219.168.149/31"
        gateway: "103.219.168.148"
        if_name: "enp6s0"
      # Public IPv4 address to be configured on the EDGE.
      # Defaults to the network address above without the CIDR range.
      public_ipv4: "{{ network_config.ipv4_cidr | ansible.utils.ipaddr('address') }}"

  vars:
    metrics_labels:
      appliance: "scionsui-lat-lon1-01.appliance"
      product: "edge"
      project: "sui-scion-testnet"
      shortname: "scionsui-lat-lon1-01"
    dns:
      - address: "9.9.9.9"
      - address: "149.112.112.112"
    ebgp_multihop: 2
    appliance_hostname: "scionsui-lat-lon1-01"
    logging_url: "https://incoming_logs:c1ace353e91a01f60e76f9cc@gateway-2.loki.sui.io/loki/api/v1/push"
    # Directory in which secret values are stored on the controller
    secrets_dir: "~/scion-deployment-packages/scionsui-lat-lon1-01/secrets"
    # Directory of the deployment package provided by Mysten Labs
    deployment_package_path: "~/scion-deployment-packages/scionsui-lat-lon1-01"

    # Paths derived from the above
    deployment_package_config: "{{ deployment_package_path }}/config.yml"
    scion_trcs_path: "{{ deployment_package_path }}/trcs"
    scion_certificate_path: "{{ deployment_package_path }}/scion-cert.pem"
    scion_forwarding_key_path: "{{ secrets_dir }}/forwarding-key.key"
    scion_private_key_path: "{{ secrets_dir }}/scion-private-key.key"
    #    grafana_agent_systemd_path: "{{ deployment_package_path }}/grafana-agent-systemd.yml"
    #grafana_agent_config_path: "{{ deployment_package_path }}/grafana-agent-config.yml"

lonLatitude2:
  hosts:
    lon-baremetal-02:
      # -- SSH options
      ansible_host: "160.202.128.153"
      ansible_user: "ubuntu"
      ansible_ssh_private_key_file: ~/.ssh/mysten_gmail_personal

      # -- Configuration
      # Public interface that will be shared with the EDGE VM
      public_interface: "scionwan"
      # Public IPv4 address of the bare-metal host
      public_ipv4: "160.202.128.153"
      # The inventory hostname of the hosted EDGE
      hosted_edge: edge

    lon-edge-02:
      # -- SSH options
      # Uses the bare-metal as a jump host to SSH into the hosted EDGE VM, does not need to be changed.
      ansible_host: "192.168.18.2"
      ansible_user: "anapaya"
      ansible_ssh_common_args: "-J {{ hostvars[vm_host]['ansible_user'] ~ '@' ~ hostvars[vm_host]['ansible_host'] }}"

      # -- Configuration
      # Inventory hostname of the bare-metal host associated with this EDGE VM
      vm_host: lon-baremetal-01
      # IP and gateway for the EDGE appliance.
      network_config:
        ipv4_cidr: "103.50.32.169/31"
        gateway: "103.50.32.168"
        if_name: "enp6s0"
      # Public IPv4 address to be configured on the EDGE.
      # Defaults to the network address above without the CIDR range.
      public_ipv4: "{{ network_config.ipv4_cidr | ansible.utils.ipaddr('address') }}"

  vars:
    metrics_labels:
      appliance: "scionsui-lat-lon1-02.appliance"
      product: "edge"
      project: "sui-scion-testnet"
      shortname: "scionsui-lat-lon1-02"
    dns:
      - address: "9.9.9.9"
      - address: "149.112.112.112"
    ebgp_multihop: 2
    appliance_hostname: "scionsui-lat-lon1-02"
    logging_url: "https://incoming_logs:c1ace353e91a01f60e76f9cc@gateway-2.loki.sui.io/loki/api/v1/push"
    # Directory in which secret values are stored on the controller
    secrets_dir: "~/scion-deployment-packages/scionsui-lat-lon1-02/secrets"
    # Directory of the deployment package provided by Mysten Labs
    deployment_package_path: "~/scion-deployment-packages/scionsui-lat-lon1-02"

    # Paths derived from the above
    deployment_package_config: "{{ deployment_package_path }}/config.yml"
    scion_trcs_path: "{{ deployment_package_path }}/trcs"
    scion_certificate_path: "{{ deployment_package_path }}/scion-cert.pem"
    scion_forwarding_key_path: "{{ secrets_dir }}/forwarding-key.key"
    scion_private_key_path: "{{ secrets_dir }}/scion-private-key.key"
    #    grafana_agent_systemd_path: "{{ deployment_package_path }}/grafana-agent-systemd.yml"
    #grafana_agent_config_path: "{{ deployment_package_path }}/grafana-agent-config.yml"
